{% extends 'base.html' %}

{% block title %}Home - My Flask App{% endblock %}

{% block content %}
<div class="container">
    {% if session.get('logged_in') %}
    <div class="container-fluid">
        <h3>Students List:</h3>
        <p>Student data table.</p>
        <table class="table table-bordered table-responsive table-hover">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>First name</th>
                    <th>Major</th>
                    <th>Scholarship</th>
                    <th>amount</th>
                    <th>details</th>
                </tr>
            </thead>
            {% for student in students %}
            <tbody>
                <td>{{ student.id }}</td>
                <td>{{ student.fname }}</td>
                <td>{{ student.major }}</td>
                <td>{{ student.scholarship }}</td>
                <td>{{ student.amount }}</td>
                <td>{{ student.details }}</td>
            </tbody>
            {% endfor %}
        </table>
        <hr class="px-6 mx-6">
        <section class="database-part-2">
            <h4>Part II. Database query</h4>
            <p>The results are based on raw SQL queries.</p>
            <div class="accordion" id="accordionExample">
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            1. Write an SQL query to fetch first name of the student in upper case.
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <p> <span class="fa-solid fa-arrow-right-long"></span> {{ fname }}</p>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            2. Write an SQL query to fetch unique values of Major subjects from student table.
                        </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <p><span class="fa-solid fa-arrow-right-long"></span> {{ major }}</p>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            3. List all student and their scholarship amounts if they have received any. If a student has
                            not received a scholarship, display Null for the scholarship details.
                        </button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <p><span class="fa-solid fa-arrow-right-long"></span> {{ scholar }}</p>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                            4. Write an SQL query to list student id who does not get scholarship.
                        </button>
                    </h2>
                    <div id="collapseFour" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <p><span class="fa-solid fa-arrow-right-long"></span>{{ non_scholar }}</p>
                        </div>
                    </div>

                </div>
            </div>
        </section>
    </div>
    {% else %}
    <h2 class="mt-2">Welcome to My Flask App</h2>
    <p>This is the home page!</p>
    {% endif %}
</div>
{% endblock %}
